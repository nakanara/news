<!DOCTYPE html>
<html lagn="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.w3.org/1999/xhtml">

<th:block th:replace="/common/header :: headFragment"></th:block>

<div>
    <script type="text/javascript" src="https://static.nid.naver.com/js/naverLogin_implicit-1.0.3.js" charset="utf-8"></script>


    <form id="f" th:action="@{/sns/login/naver}" method="POST">


        <input name="user_uid" >

        <input name="snsType" id="idSnsType" value="NAVER">
        <input name="snsId" id="idSnsId" value="">
        <input name="snsName" id="idSnsName" value="">
        <input name="nickName" id="idNickName" value="">
        <input name="snsProfile" id="idSnsProfile" value="">


        <input name="username" id="idUsername" value="">
        <input name="name" id="idName" value="">
        <input name="mail" id="idMail" value="">
    </form>
</div>


<script type="text/javascript">
    var naver_id_login = new naver_id_login("Iuo1Ckc_K40ENaHAcWCY", "http://localhost:8080/api/oauth/naver");
    // 접근 토큰 값 출력
    // alert(naver_id_login.oauthParams.access_token);
    // 네이버 사용자 프로필 조회
    naver_id_login.get_naver_userprofile("naverSignInCallback()");
    // 네이버 사용자 프로필 조회 이후 프로필 정보를 처리할 callback function
    function naverSignInCallback() {
        console.log(naver_id_login);
        console.log('id=' + naver_id_login.getProfileData('id'));
        console.log('nickname=' + naver_id_login.getProfileData('nickname'));
        console.log('name=' + naver_id_login.getProfileData('name'));
        console.log('email=' + naver_id_login.getProfileData('email'));
        console.log('gender=' + naver_id_login.getProfileData('gender'));
        console.log('age=' + naver_id_login.getProfileData('age'));
        console.log('birthday=' + naver_id_login.getProfileData('birthday'));
        console.log('profile_image=' + naver_id_login.getProfileData('profile_image'));
        console.log('birthyear=' + naver_id_login.getProfileData('birthyear'));
        console.log('mobile=' + naver_id_login.getProfileData('mobile'));

        var email = naver_id_login.getProfileData('email');
        var name = naver_id_login.getProfileData('name');

        $("#idSnsId").val(naver_id_login.getProfileData('id'));
        $("#idSnsName").val(name);
        $("#idSnsName").val(email);
        $("#idNickName").val(naver_id_login.getProfileData('nickname'));


        $("#idMail").val(email);
        $("#idUsername").val(email);
        $("#idName").val(name);

        $("#f").submit();

        // AAAAOG3rIS6EmeHpfFzgwUWzazdV4uSVhsE3jcd-bx2hU8phGFlE3GY8cmylmpkOB4pQKMFnJWTxQOpzU_QTsQbnqg8
    }
</script>
<th:block th:replace="/common/footer :: footerFragment"></th:block>
</html>