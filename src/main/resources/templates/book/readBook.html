<!DOCTYPE html>
<html lagn="ko" xmlns:th="http://www.thymeleaf.org">

<th:block th:replace="/common/header :: headFragment"></th:block>

<style>

</style>
<div class="container">
    <div id="vueapp">
        <div class="row">
        <div class="offset-md-12">

            <div th:object="${book}" class="news">
                <input type="hidden" id="bookId" th:value="*{bookId}" />

                <div class="box-article-head">
                    <div class="row box-view-title-area">
                        <div class="col-md-12">
                            <a th:href="@{__*{link}__}" target="_blank"><p class="book-title" th:utext="*{title}"></p></a>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <label class="book-author" th:text="*{author}"></label>
                            <label class="book-publisher" th:text="*{publisher}"></label>
                            <label class="book-publisher">구매하기</label>
                            <label class="book-publisher">현재 읽고 있는 사람(12명)</label>
                        </div>
                    </div>
                </div>

                <div>

                    <div class="row">
                        <div class="col-md-4">
                            <span class="book-image-area">
                                <img th:src="*{image}" class="book-image">
                            </span>

                        </div>

                        <div class="col-md-8">
                            <div class="row">
                                <div class="col-md-12">

                                    <span class="book-star">
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star"></i>
                                        <i class="fa-solid fa-star-half-stroke"></i>
                                        <i class="fa-regular fa-star"></i>
                                        <span>4.5점</span>
                                        <span>(12,345명)</span>
                                    </span>

                                </div>

                                <div class="col-md-12">
                                    <div style="width: 300px; height: 200px;">
                                        <canvas id="bookchart" aria-label="Hello ARIA World" role="img"></canvas>
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div id="countdown" style="height: 100px;">
                                        <ul>
                                            <li><span id="days">{{days}}</span></li>
                                            <li><span id="hours">{{hours}}</span></li>
                                            <li><span id="minutes">{{minutes}}</span></li>
                                            <li><span id="seconds" v-bind="seconds" read>{{seconds}}</span></li>
                                            <input v-model="seconds">
                                        </ul>
                                    </div>
                                </div>

                                <div class="col-md-12">
                                    <div class="btn btn-primary" @click="fnStart()">읽기시작</div>
                                    <div class="btn btn-primary" @click="fnStop()">읽기종료</div>
                                    <div class="btn btn-primary">구매하기</div>
                                    <span class="book-icon" title="출력하기"><i class="fa-solid fa-print"></i></span>
                                    <span class="book-icon" title="이메일로 공유"><i class="fa-regular fa-envelope"></i></span>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12 book-description">
                            <p th:utext="*{description}"></p>
                        </div>
                    </div>

                </div>

                <!-- 버튼 -->
                <div class="row" style="padding-top: 10px;">
                    <div class="offset-md-12" style="text-align: right;">
                        <div class="btn btn-primary news-btn-link" data-href="/book" >목록</div>
                        <div class="btn btn-primary" id="btn-answer">질문보기</div>
                    </div>
                </div>

                <!-- 질문 -->
                <div>
                    <div class="row">
                        <div class="col-md-12 wf-comment">
                            <textarea name="question" class="comment" id="book-question" placeholder="질문을 입력해 주세요."></textarea>
                            <div class="btn btn-primary" id="btn-add-question">등록</div>
                        </div>
                    </div>


                    <!-- 질문 View -->
                    <div class="row">
                        <div class="col-md-12 wf-comment box-comment">
                            <div id="questionTable" class="box-comment-list">
                                <ul>
                                    <li th:each="item : ${questions}" >
                                        <span class="box-comment-meta btn-question-like" th:data="${item.bookQuestionId}">
                                            <i class="fa-regular fa-thumbs-up" ></i>

                                            <span class="nickname">NickName</span>
                                        </span>
                                        <p th:utext="${item.question}"></p>

                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- //질문 View -->
                </div>


            </div>

        </div>
        </div>
    </div>

    <script>

        const { createApp } = Vue
        const second = 1000,
            minute = second * 60,
            hour = minute * 60,
            day = hour * 24,
            interval1 = '';


        createApp({
            data() {
                return {
                    timer: '',
                    startTime: '',
                    distance: '',
                    days: '',
                    hours: '',
                    minutes: '',
                    seconds: '',

                }
            },
            methods: {
                fnStart(){

                    console.log('start');
                    let today = new Date().getTime();

                    console.log(today);
                    this.startTime = today;
                    console.log('start=> ' + this.startTime);

                    this.interval1 = setInterval(function() {

                        const now = new Date().getTime();

                        console.log('now =' + now);
                        console.log('startTime =' + today);

                        this.distance = now - today;
                        this.days= Math.floor(distance / (day)),
                        this.hours = Math.floor((distance % (day)) / (hour)),
                        this.minutes = Math.floor((distance % (hour)) / (minute)),
                        this.seconds = Math.floor((distance % (minute)) / second);

                        console.log('timer =' + this.distance);
                        console.log('seconds =' + this.seconds);
                        //
                    }, 1000)




                },
                fnStop(){
                    console.log('stop');
                    clearInterval(this.interval1);
                }
            }
        }).mount('#vueapp');
    </script>
  <script type="text/javascript">
    (function($){
        $app.initForm();
    })(jQuery);
  </script>
</div>


<th:block th:replace="/common/footer :: footerFragment"></th:block>
</html>